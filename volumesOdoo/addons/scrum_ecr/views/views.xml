<odoo>
  <data>
    <!-- ========== VISTAS DE TAREAS ========== -->

    <!-- Vista Tree de Tareas -->
    <record model="ir.ui.view" id="view_task_tree">
      <field name="name">scrum_ecr task tree</field>
      <field name="model">scrum_ecr.task</field>
      <field name="arch" type="xml">
        <tree string="Tareas" editable="bottom">
          <field name="name_ecr"/>
          <field name="sprint_id_ecr"/>
          <field name="technology_ids_ecr" widget="many2many_tags"/>
          <field name="date_end_ecr"/>
          <field name="paused_ecr" widget="boolean"/>
          <field name="create_date"/>
        </tree>
      </field>
    </record>

     <!-- Vista Form de Tareas -->
    <record model="ir.ui.view" id="view_task_form">
      <field name="name">scrum_ecr task form</field>
      <field name="model">scrum_ecr.task</field>
      <field name="arch" type="xml">
        <form string="Tarea">
          <sheet>
            <widget name="web_ribbon" title="En Pausa" bg_color="bg-danger" invisible="not paused_ecr"/>
            <group>
              <group>
                <field name="name_ecr"/>
                <field name="sprint_id_ecr"/>
                <field name="paused_ecr"/>
              </group>
              <group>
                <field name="create_date"/>
                <field name="date_end_ecr"/>
              </group>
            </group>
            <group>
              <field name="description_ecr" placeholder="Descripción de la Tarea..." />
            </group>
            <group string="Tecnologías utilizadas">
              <field name="technology_ids_ecr" widget="many2many_tags" nolabel="1"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <!-- Vista Kanban de Tareas -->
    <record model="ir.ui.view" id="view_task_kanban">
      <field name="name">scrum_ecr task kanban</field>
      <field name="model">scrum_ecr.task</field>
      <field name="arch" type="xml">
        <kanban class="o_kanban_small_column" default_group_by="sprint_id_ecr">
          <field name="name_ecr"/>
          <field name="sprint_id_ecr"/>
          <field name="technology_ids_ecr" widget="many2many_tags"/>
          <field name="date_end_ecr"/>
          <field name="paused_ecr"/>
          <field name="create_date"/>
          <templates>
            <t t-name="kanban-box">
              <div t-attf-class="oe_kanban_global_click #{record.paused_ecr.raw_value ? 'bg-danger-subtle' : ''}">
                <div class="oe_kanban_details">
                  <strong class="o_kanban_record_title">
                    <field name="name_ecr"/>
                  </strong>
                  <div class="o_kanban_tags_section">
                    <field name="technology_ids_ecr" widget="many2many_tags"/>
                  </div>
                  <div class="o_kanban_record_bottom">
                    <div class="oe_kanban_bottom_left">
                      <field name="date_end_ecr" widget="date"/>
                    </div>
                    <div class="oe_kanban_bottom_right">
                      <t t-if="record.paused_ecr.raw_value">
                        <span class="badge bg-danger">En pausa</span>
                      </t>
                    </div>
                  </div>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <!-- Vista Calendar de Tareas -->
    <record model="ir.ui.view" id="view_task_calendar">
      <field name="name">scrum_ecr task calendar</field>
      <field name="model">scrum_ecr.task</field>
      <field name="arch" type="xml">
        <calendar string="Tareas" date_start="date_end_ecr" color="sprint_id_ecr" mode="month">
          <field name="name_ecr"/>
          <field name="sprint_id_ecr"/>
          <field name="technology_ids_ecr"/>
          <field name="paused_ecr"/>
        </calendar>
      </field>
    </record>

    <!-- Acción de Tareas -->
    <record id="action_window_task" model="ir.actions.act_window">
        <field name="name">Tareas</field>
        <field name="res_model">scrum_ecr.task</field>
        <field name="view_mode">kanban,tree,form,calendar</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear una nueva Tarea
            </p>
        </field>
    </record>

    <!-- ========== VISTAS DE SPRINTS ========== -->
    
    <!-- Vista Tree de Sprints -->
    <record model="ir.ui.view" id="view_sprint_tree">
        <field name="name">scrum_ecr sprint tree</field>
        <field name="model">scrum_ecr.sprint</field>
        <field name="arch" type="xml">
            <tree string="Sprints">
                <field name="name_ecr"/>
                <field name="date_start_ecr"/>
                <field name="date_end_ecr"/>
            </tree>
        </field>
    </record>

    <!-- Vista Form de Sprints -->
    <record id="view_sprint_form" model="ir.ui.view">
        <field name="name">scrum_ecr sprint form</field>
        <field name="model">scrum_ecr.sprint</field>
        <field name="arch" type="xml">
            <form string="Sprint">
                <sheet>
                    <group>
                        <group>
                            <field name="name_ecr"/>
                            <field name="date_start_ecr"/>
                            <field name="date_end_ecr"/>
                        </group>
                    </group>
                    <group>
                        <field name="description_ecr" placeholder="Descripción del Sprint..."/>
                    </group>
                    <notebook>
                        <page string="Tareas del Sprint">
                            <field name="task_ids_ecr">
                                <tree editable="bottom">
                                    <field name="name_ecr"/>
                                    <field name="date_end_ecr"/>
                                    <field name="technology_ids_ecr" widget="many2many_tags"/>
                                    <field name="paused_ecr"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Acción de Sprints -->
    <record id="action_window_sprint" model="ir.actions.act_window">
        <field name="name">Sprints</field>
        <field name="res_model">scrum_ecr.sprint</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear un nuevo Sprint
            </p>
        </field>
    </record>

    <!-- ========== VISTAS DE TECNOLOGÍAS ========== -->
    
    <!-- Vista Tree de Tecnologías -->
    <record model="ir.ui.view" id="view_technology_tree">
        <field name="name">scrum_ecr technology tree</field>
        <field name="model">scrum_ecr.technology</field>
        <field name="arch" type="xml">
            <tree string="Tecnologías">
                <field name="image_ecr" widget="image" class="oe_avatar"/>
                <field name="name_ecr"/>
                <field name="description_ecr"/>
            </tree>
        </field>
    </record>

    <!-- Vista Form de Tecnologías -->
    <record model="ir.ui.view" id="view_technology_form">
        <field name="name">scrum_ecr technology form</field>
        <field name="model">scrum_ecr.technology</field>
        <field name="arch" type="xml">
            <form string="Tecnología">
                <sheet>
                    <field name="image_ecr" widget="image" class="oe_avatar"/>
                    <group>
                        <field name="name_ecr"/>
                    </group>
                    <group>
                        <field name="description_ecr" placeholder="Descripción de la Tecnología..."/>
                    </group>
                    <notebook>
                        <page string="Tareas que usan esta tecnología">
                            <field name="task_ids_ecr" widget="many2many_tags"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Acción de Tecnologías -->
    <record model="ir.actions.act_window" id="action_window_technology">
        <field name="name">Tecnologías</field>
        <field name="res_model">scrum_ecr.technology</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear una nueva Tecnología
            </p>
        </field>
    </record>

    <!-- ========== MENÚS ========== -->

    <!-- Top menu item -->
    <menuitem id="menu_scrum_ecr_root" name="SCRUM" sequence="10" groups="scrum_ecr.group_scrum_ecr"/>

    <!-- menu categories -->
    <menuitem id="menu_scrum_ecr_tasks" name="Tareas" parent="menu_scrum_ecr_root" action="action_window_task" sequence="10" groups="scrum_ecr.group_scrum_ecr"/>

    <menuitem id="menu_scrum_ecr_sprints" name="Sprints" parent="menu_scrum_ecr_root" action="action_window_sprint" sequence="20" groups="scrum_ecr.group_scrum_ecr"/>

    <menuitem id="menu_scrum_ecr_technologies" name="Tecnologías" parent="menu_scrum_ecr_root" action="action_window_technology" sequence="30" groups="scrum_ecr.group_scrum_ecr"/>
  </data>
</odoo>
